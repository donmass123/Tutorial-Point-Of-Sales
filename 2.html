<!DOCTYPE html>
<html lang="en" dir="ltr"
    class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-due-collections"
    data-has-hydrated="false">

<head>
    <meta charset="UTF-8" />
    <meta name="generator" content="Docusaurus v3.8.0" />
    <title data-rh="true">
        Adding Due Collections to Cash Register | Ultimate POS Tutorials
    </title>
    <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1" />
    <meta data-rh="true" name="twitter:card" content="summary_large_image" />
    <meta data-rh="true" property="og:image"
        content="https://ultimate-pos-tutorials.vercel.app/img/docusaurus-social-card.jpg" />
    <meta data-rh="true" name="twitter:image"
        content="https://ultimate-pos-tutorials.vercel.app/img/docusaurus-social-card.jpg" />
    <meta data-rh="true" property="og:url" content="https://ultimate-pos-tutorials.vercel.app/docs/due-collections" />
    <meta data-rh="true" property="og:locale" content="en" />
    <meta data-rh="true" name="docusaurus_locale" content="en" />
    <meta data-rh="true" name="docsearch:language" content="en" />
    <meta data-rh="true" name="docusaurus_version" content="current" />
    <meta data-rh="true" name="docusaurus_tag" content="docs-default-current" />
    <meta data-rh="true" name="docsearch:version" content="current" />
    <meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current" />
    <meta data-rh="true" property="og:title"
        content="Adding Due Collections to Cash Register | Ultimate POS Tutorials" />
    <meta data-rh="true" name="description"
        content="Complete tutorial for implementing due collections display in POS cash register" />
    <meta data-rh="true" property="og:description"
        content="Complete tutorial for implementing due collections display in POS cash register" />
    <meta data-rh="true" name="keywords" content="due collections,cash register,pos,laravel,payments" />
    <link data-rh="true" rel="icon" href="/img/favicon.ico" />
    <link data-rh="true" rel="canonical" href="https://ultimate-pos-tutorials.vercel.app/docs/due-collections" />
    <link data-rh="true" rel="alternate" href="https://ultimate-pos-tutorials.vercel.app/docs/due-collections"
        hreflang="en" />
    <link data-rh="true" rel="alternate" href="https://ultimate-pos-tutorials.vercel.app/docs/due-collections"
        hreflang="x-default" />
    <script data-rh="true" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Due Collections Feature",
            "item": "https://ultimate-pos-tutorials.vercel.app/docs/due-collections"
          }
        ]
      }
    </script>
    <link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Ultimate POS Tutorials RSS Feed" />
    <link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Ultimate POS Tutorials Atom Feed" />

    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3K3L665F39"></script>
    <script>
        function gtag() {
            dataLayer.push(arguments);
        }
        (window.dataLayer = window.dataLayer || []),
            gtag("js", new Date()),
            gtag("config", "G-3K3L665F39", { anonymize_ip: !0 });
    </script>
    <link rel="stylesheet" href="/assets/css/styles.893071f2.css" />
    <script src="/assets/js/runtime~main.5ac7aa24.js" defer="defer"></script>
    <script src="/assets/js/main.3f1260f9.js" defer="defer"></script>
</head>

<body class="navigation-with-keyboard">
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
        <defs>
            <symbol id="theme-svg-external-link" viewBox="0 0 24 24">
                <path fill="currentColor"
                    d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" />
            </symbol>
        </defs>
    </svg>
    <script>
        !(function () {
            var t = "light";
            var e =
                (function () {
                    try {
                        return new URLSearchParams(window.location.search).get(
                            "docusaurus-theme"
                        );
                    } catch (t) { }
                })() ||
                (function () {
                    try {
                        return window.localStorage.getItem("theme");
                    } catch (t) { }
                })();
            document.documentElement.setAttribute("data-theme", e || t),
                document.documentElement.setAttribute("data-theme-choice", e || t);
        })(),
            (function () {
                try {
                    const c = new URLSearchParams(window.location.search).entries();
                    for (var [t, e] of c)
                        if (t.startsWith("docusaurus-data-")) {
                            var a = t.replace("docusaurus-data-", "data-");
                            document.documentElement.setAttribute(a, e);
                        }
                } catch (t) { }
            })();
    </script>
    <div id="__docusaurus">
        
        <div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0">
            <div class="docsWrapper_hBAB">
                <button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU"
                    type="button"></button>
                <div class="docRoot_UBD9">
                    <main class="docMainContainer_TBSr">
                        <div class="container padding-top--md padding-bottom--lg">
                            <div class="row">
                                <div class="col docItemCol_VOVn">
                                    <div class="docItemContainer_Djhp">
                                        <article>
                                            
                                            <div class="theme-doc-markdown markdown">
                                                <header>
                                                    <h1>Adding Due Collections to Cash Register</h1>
                                                </header>
                                                <p>
                                                    Learn how to add a comprehensive due collections
                                                    display to your POS cash register that shows
                                                    collected payments, pending dues, and overdue
                                                    amounts.
                                                </p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-what-youll-build">
                                                    üìã What You&#x27;ll Build<a href="#-what-youll-build"
                                                        class="hash-link"
                                                        aria-label="Direct link to üìã What You&#x27;ll Build"
                                                        title="Direct link to üìã What You&#x27;ll Build">‚Äã</a>
                                                </h2>
                                                <p>
                                                    <img decoding="async" loading="lazy" alt="Due Collections Preview"
                                                        src="/assets/images/due-collections-preview-97e82cea377112d6b45fdd95619c2a7e.png"
                                                        width="1590" height="1229" class="img_ev3q" />
                                                </p>
                                                <p>
                                                    By the end of this tutorial, your cash register will
                                                    display:
                                                </p>
                                                <ul>
                                                    <li>
                                                        ‚úÖ <strong>Collected Today</strong>: All due
                                                        payments received today (business-wide)
                                                    </li>
                                                    <li>
                                                        ‚ö†Ô∏è <strong>Pending Due Today</strong>: Outstanding
                                                        amounts from today&#x27;s sales
                                                    </li>
                                                    <li>
                                                        üî¥ <strong>Overdue Amounts</strong>: Previous
                                                        days&#x27; unpaid dues (shows when applicable)
                                                    </li>
                                                </ul>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-features">
                                                    üéØ Features<a href="#-features" class="hash-link"
                                                        aria-label="Direct link to üéØ Features"
                                                        title="Direct link to üéØ Features">‚Äã</a>
                                                </h2>
                                                <ul>
                                                    <li>
                                                        <strong>Business-wide visibility</strong> (not
                                                        just current cashier)
                                                    </li>
                                                    <li>
                                                        <strong>Real-time data</strong> with transaction
                                                        counts
                                                    </li>
                                                    <li>
                                                        <strong>Smart conditional display</strong>
                                                        (overdue box only shows when needed)
                                                    </li>
                                                    <li>
                                                        <strong>Beautiful responsive design</strong> with
                                                        icons
                                                    </li>
                                                    <li><strong>Print-friendly styling</strong></li>
                                                    <li>
                                                        <strong>Works in both register details and close
                                                            register modals</strong>
                                                    </li>
                                                </ul>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-prerequisites">
                                                    üìö Prerequisites<a href="#-prerequisites" class="hash-link"
                                                        aria-label="Direct link to üìö Prerequisites"
                                                        title="Direct link to üìö Prerequisites">‚Äã</a>
                                                </h2>
                                                <ul>
                                                    <li>Laravel-based POS system</li>
                                                    <li>Basic knowledge of PHP and Blade templates</li>
                                                    <li>Access to controller files and views</li>
                                                    <li>Understanding of database relationships</li>
                                                </ul>
                                                <hr />
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="-implementation-steps">
                                                    üöÄ Implementation Steps<a href="#-implementation-steps"
                                                        class="hash-link"
                                                        aria-label="Direct link to üöÄ Implementation Steps"
                                                        title="Direct link to üöÄ Implementation Steps">‚Äã</a>
                                                </h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="step-1-update-the-cashregisterutil-class">
                                                    Step 1: Update the CashRegisterUtil Class<a
                                                        href="#step-1-update-the-cashregisterutil-class"
                                                        class="hash-link"
                                                        aria-label="Direct link to Step 1: Update the CashRegisterUtil Class"
                                                        title="Direct link to Step 1: Update the CashRegisterUtil Class">‚Äã</a>
                                                </h3>
                                                <p>
                                                    First, we&#x27;ll add the due collections logic to
                                                    your <code>app/Utils/CashRegisterUtil.php</code>.
                                                </p>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="11-add-the-due-collections-method">
                                                    1.1 Add the Due Collections Method<a
                                                        href="#11-add-the-due-collections-method" class="hash-link"
                                                        aria-label="Direct link to 1.1 Add the Due Collections Method"
                                                        title="Direct link to 1.1 Add the Due Collections Method">‚Äã</a>
                                                </h4>
                                                <p>
                                                    Add this method to your
                                                    <code>app/Utils/CashRegisterUtil.php</code>:
                                                </p>
                                                <div class="language-php codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-php codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">getTodayDueCollections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;user.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// COLLECTED TODAY - Payments made today that reduce existing due amounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// This includes: payments on old invoices + additional payments on today&#x27;s invoices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$today_due</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transaction_payments as tp&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transactions as t&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.transaction_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.paid_on&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Payments made today</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;sell&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;final&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Exclude initial payments made at the time of sale creation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token variable" style="color:#36acaa">$query</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereRaw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;DATE(tp.paid_on) != DATE(t.created_at)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Payment made on different day than sale</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">orWhereRaw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.created_at &gt; DATE_ADD(t.created_at, INTERVAL 5 MINUTE)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Or payment made more than 5 minutes after sale creation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;SUM(tp.amount) as total_due_collected&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;COUNT(DISTINCT tp.transaction_id) as total_due_transactions&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// PENDING DUES TODAY - Transactions created today that still have pending amounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$pending_dues</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transactions as t&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.transaction_date&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Transactions created today</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;sell&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;final&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.payment_status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;!=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;paid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Not fully paid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;SUM(t.final_total - COALESCE(</span><br></span><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">                    (SELECT SUM(amount) FROM transaction_payments WHERE transaction_id = t.id), 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">                )) as total_pending_due&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;COUNT(t.id) as total_pending_transactions&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// OVERDUE AMOUNTS - Previous days&#x27; unpaid transactions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$overdue_amounts</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transactions as t&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.transaction_date&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;&lt;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Previous days</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;sell&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;final&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.payment_status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;!=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;paid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Not fully paid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;SUM(t.final_total - COALESCE(</span><br></span><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">                    (SELECT SUM(amount) FROM transaction_payments WHERE transaction_id = t.id), 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string single-quoted-string" style="color:#e3116c">                )) as total_overdue&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;COUNT(t.id) as total_overdue_transactions&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;due_collected_today&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$today_due</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_due_collected</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;due_transactions_count&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$today_due</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_due_transactions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;pending_due_today&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$pending_dues</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_pending_due</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;pending_transactions_count&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$pending_dues</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_pending_transactions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;overdue_amount&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$overdue_amounts</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_overdue</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;overdue_transactions_count&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$overdue_amounts</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_overdue_transactions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">getTodayDueCashCollections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;user.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Get cash payments made today for due collections</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$due_cash_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transaction_payments as tp&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transactions as t&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.transaction_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.paid_on&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Payments made today</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;sell&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;t.status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;final&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.method&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Only cash payments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Exclude initial payments made at time of sale creation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token variable" style="color:#36acaa">$query</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">whereRaw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;DATE(tp.paid_on) != DATE(t.created_at)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Different day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">orWhereRaw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.created_at &gt; DATE_ADD(t.created_at, INTERVAL 5 MINUTE)&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Or 5+ minutes later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;tp.amount&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$due_cash_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="step-2-update-the-controller">
                                                    Step 2: Update the Controller<a href="#step-2-update-the-controller"
                                                        class="hash-link"
                                                        aria-label="Direct link to Step 2: Update the Controller"
                                                        title="Direct link to Step 2: Update the Controller">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Now update your
                                                    <code>app/Http/Controllers/CashRegisterController.php</code>
                                                    to call the utility method.
                                                </p>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="21-update-getregisterdetails-method">
                                                    2.1 Update getRegisterDetails Method<a
                                                        href="#21-update-getregisterdetails-method" class="hash-link"
                                                        aria-label="Direct link to 2.1 Update getRegisterDetails Method"
                                                        title="Direct link to 2.1 Update getRegisterDetails Method">‚Äã</a>
                                                </h4>
                                                <p>
                                                    Update your existing
                                                    <code>getRegisterDetails()</code> method in the
                                                    controller:
                                                </p>
                                                <div class="language-php codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-php codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">getRegisterDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">can</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;view_cash_register&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Unauthorized action.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;user.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getRegisterDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;open_time&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#393A34">\</span><span class="token class-name class-name-fully-qualified static-context">Carbon</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateTimeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$is_types_of_service_enabled</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">moduleUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">isModuleEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;types_of_service&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$details</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getRegisterTransactionDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$is_types_of_service_enabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Add due collections data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$due_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getTodayDueCollections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$details</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;due_collections&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$due_collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$payment_types</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">payment_types</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">location_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_register.register_details&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">with</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">compact</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;register_details&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;details&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;payment_types&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;close_time&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="22-update-your-existing-getregisterdetails-method-in-apputilscashregisterutilphp">
                                                    2.2 Update your existing getRegisterDetails method
                                                    in app/Utils/CashRegisterUtil.php<a
                                                        href="#22-update-your-existing-getregisterdetails-method-in-apputilscashregisterutilphp"
                                                        class="hash-link"
                                                        aria-label="Direct link to 2.2 Update your existing getRegisterDetails method in app/Utils/CashRegisterUtil.php"
                                                        title="Direct link to 2.2 Update your existing getRegisterDetails method in app/Utils/CashRegisterUtil.php">‚Äã</a>
                                                </h4>
                                                <div class="language-php codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-php codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">getRegisterDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$query</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">CashRegister</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">leftjoin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_register_transactions as ct&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;ct.cash_register_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;users as u&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;u.id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.user_id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">leftJoin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;business_locations as bl&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;bl.id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.location_id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$query</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.status&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;open&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$query</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$query</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.id as register_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.created_at as open_time&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.closed_at as closed_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.user_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.closing_note&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.location_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_registers.denominations&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;initial&#x27;, amount, 0)) as cash_in_hand&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;sell&#x27;, amount, IF(transaction_type=&#x27;refund&#x27;, -1 * amount, 0))) as total_sale&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;expense&#x27;, IF(transaction_type=&#x27;refund&#x27;, -1 * amount, amount), 0)) as total_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;cash&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_cash&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;cash&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_cash_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;cheque&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_cheque&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;cheque&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_cheque_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;card&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_card&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;card&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_card_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;bank_transfer&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_bank_transfer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;bank_transfer&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_bank_transfer_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;other&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_other&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;other&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_other_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;advance&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_advance&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;advance&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_advance_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_1&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_2&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_3&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_4&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_5&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_5&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_6&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_6&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_7&#x27;, IF(transaction_type=&#x27;sell&#x27;, amount, 0), 0)) as total_custom_pay_7&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_1&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_1_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_2&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_2_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_3&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_3_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_4&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_4_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_5&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_5_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_6&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_6_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;custom_pay_7&#x27;, IF(transaction_type=&#x27;expense&#x27;, amount, 0), 0)) as total_custom_pay_7_expense&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, amount, 0)) as total_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;cash&#x27;, amount, 0), 0)) as total_cash_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;cheque&#x27;, amount, 0), 0)) as total_cheque_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;card&#x27;, amount, 0), 0)) as total_card_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;bank_transfer&#x27;, amount, 0), 0)) as total_bank_transfer_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;other&#x27;, amount, 0), 0)) as total_other_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;advance&#x27;, amount, 0), 0)) as total_advance_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_1&#x27;, amount, 0), 0)) as total_custom_pay_1_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_2&#x27;, amount, 0), 0)) as total_custom_pay_2_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_3&#x27;, amount, 0), 0)) as total_custom_pay_3_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_4&#x27;, amount, 0), 0)) as total_custom_pay_4_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_5&#x27;, amount, 0), 0)) as total_custom_pay_5_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_6&#x27;, amount, 0), 0)) as total_custom_pay_6_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(transaction_type=&#x27;refund&#x27;, IF(pay_method=&#x27;custom_pay_7&#x27;, amount, 0), 0)) as total_custom_pay_7_refund&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;cheque&#x27;, 1, 0)) as total_cheques&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;SUM(IF(pay_method=&#x27;card&#x27;, 1, 0)) as total_card_slips&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name static-context">DB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string double-quoted-string" style="color:#e3116c">&quot;CONCAT(COALESCE(surname, &#x27;&#x27;), &#x27; &#x27;, COALESCE(first_name, &#x27;&#x27;), &#x27; &#x27;, COALESCE(last_name, &#x27;&#x27;)) as user_name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;u.email&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;bl.name as location_name&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ADD DUE COLLECTION CASH TO TOTAL CASH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">open_time</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#393A34">\</span><span class="token class-name class-name-fully-qualified static-context">Carbon</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateTimeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Get due collection cash payments</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$due_cash_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getTodayDueCashCollections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">register_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Add due collections to total cash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_cash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">total_cash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$due_cash_collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">due_cash_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$due_cash_collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// For reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="23-update-getcloseregister-method-optional">
                                                    2.3 Update getCloseRegister Method (Optional)<a
                                                        href="#23-update-getcloseregister-method-optional"
                                                        class="hash-link"
                                                        aria-label="Direct link to 2.3 Update getCloseRegister Method (Optional)"
                                                        title="Direct link to 2.3 Update getCloseRegister Method (Optional)">‚Äã</a>
                                                </h4>
                                                <p>
                                                    If you want the same feature in your close register
                                                    modal, update your
                                                    <code>getCloseRegister()</code> method: Now update
                                                    your
                                                    <code>app/Http/Controllers/CashRegisterController.php</code>
                                                    to call the utility method.
                                                </p>
                                                <div class="language-php codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-php codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">getCloseRegister</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">can</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;close_cash_register&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">403</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Unauthorized action.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;user.business_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getRegisterDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">user_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;open_time&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#393A34">\</span><span class="token class-name class-name-fully-qualified static-context">Carbon</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">toDateTimeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$is_types_of_service_enabled</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">moduleUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">isModuleEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;types_of_service&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$details</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getRegisterTransactionDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$is_types_of_service_enabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Add due collections data for close register modal too</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$due_collections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getTodayDueCollections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$open_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$close_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$details</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;due_collections&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$due_collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$payment_types</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">cashRegisterUtil</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">payment_types</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$register_details</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">location_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$business_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$pos_settings</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;business.pos_settings&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">json_decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;business.pos_settings&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">view</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;cash_register.close_register_modal&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">with</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">compact</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;register_details&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;details&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;payment_types&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;pos_settings&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="step-2-update-the-register-details-view">
                                                    Step 2: Update the Register Details View<a
                                                        href="#step-2-update-the-register-details-view"
                                                        class="hash-link"
                                                        aria-label="Direct link to Step 2: Update the Register Details View"
                                                        title="Direct link to Step 2: Update the Register Details View">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Update your
                                                    <code>resources/views/cash_register/register_details.blade.php</code>
                                                    file.
                                                </p>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="21-add-due-collections-section">
                                                    2.1 Add Due Collections Section<a
                                                        href="#21-add-due-collections-section" class="hash-link"
                                                        aria-label="Direct link to 2.1 Add Due Collections Section"
                                                        title="Direct link to 2.1 Add Due Collections Section">‚Äã</a>
                                                </h4>
                                                <div class="language-blade codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-blade codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;modal-dialog modal-lg&quot; role=&quot;document&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;modal-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-header mini_print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;close no-print&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;h3 class=&quot;modal-title&quot;&gt;@lang( &#x27;cash_register.register_details&#x27; ) ( {{ \Carbon::createFromFormat(&#x27;Y-m-d H:i:s&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $register_details-&gt;open_time)-&gt;format(&#x27;jS M, Y h:i A&#x27;) }} - {{\Carbon::createFromFormat(&#x27;Y-m-d H:i:s&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $close_time)-&gt;format(&#x27;jS M, Y h:i A&#x27;)}} )&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-body&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @include(&#x27;cash_register.payment_details&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- Add Due Collections Section --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @if(isset($details[&#x27;due_collections&#x27;]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;hr class=&quot;no-print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row no-print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-md-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;h4&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; @lang(&#x27;lang_v1.due_collections_today&#x27;)&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-green due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.collected_today&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;due_collected_today&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;due_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-yellow due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.pending_due_today&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;pending_due_today&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;pending_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @if($details[&#x27;due_collections&#x27;][&#x27;overdue_amount&#x27;] &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-red due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-exclamation-circle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.overdue_amounts&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;overdue_amount&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;overdue_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @if(!empty($register_details-&gt;denominations))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $total = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @endphp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-md-8 col-sm-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;h3&gt;@lang( &#x27;lang_v1.cash_denominations&#x27; )&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;table class=&quot;table table-slim&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;thead&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-right&quot;&gt;@lang(&#x27;lang_v1.denomination&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot;&gt;&amp;nbsp;&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-center&quot;&gt;@lang(&#x27;lang_v1.count&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot;&gt;&amp;nbsp;&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-left&quot;&gt;@lang(&#x27;sale.subtotal&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/thead&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;tbody&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @foreach($register_details-&gt;denominations as $key =&gt; $value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-right&quot;&gt;{{$key}}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-center&quot;&gt;X&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-center&quot;&gt;{{$value ?? 0}}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-center&quot;&gt;=&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-left&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  @format_currency($key * $value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              $total += ($key * $value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @endphp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @endforeach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/tbody&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;tfoot&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th colspan=&quot;4&quot; class=&quot;text-center&quot;&gt;@lang(&#x27;sale.total&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td&gt;@format_currency($total)&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/tfoot&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/table&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-xs-6&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;report.user&#x27;):&lt;/b&gt; {{ $register_details-&gt;user_name}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;business.email&#x27;):&lt;/b&gt; {{ $register_details-&gt;email}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;business.business_location&#x27;):&lt;/b&gt; {{ $register_details-&gt;location_name}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @if(!empty($register_details-&gt;closing_note))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-xs-6&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;strong&gt;@lang(&#x27;cash_register.closing_note&#x27;):&lt;/strong&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {{$register_details-&gt;closing_note}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-footer&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;tw-dw-btn tw-dw-btn-primary tw-text-white no-print print-mini-button&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        aria-label=&quot;Print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;i class=&quot;fa fa-print&quot;&gt;&lt;/i&gt; @lang(&#x27;messages.print_mini&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;tw-dw-btn tw-dw-btn-primary tw-text-white no-print&quot; aria-label=&quot;Print&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        onclick=&quot;$(this).closest(&#x27;div.modal&#x27;).printThis();&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;i class=&quot;fa fa-print&quot;&gt;&lt;/i&gt; @lang( &#x27;messages.print_detailed&#x27; )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;tw-dw-btn tw-dw-btn-neutral tw-text-white no-print&quot; data-dismiss=&quot;modal&quot;&gt;@lang(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;messages.cancel&#x27; )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;style type=&quot;text/css&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @media print {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .modal {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      position: absolute;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      left: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      top: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      margin: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      padding: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      overflow: visible !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .info-box {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      border: 1px solid #ddd;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      margin-bottom: 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      padding: 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .info-box-icon {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display: none;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /* Due Collection Styling */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-box {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border-radius: 8px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    overflow: hidden;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    position: relative;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-icon {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    background: rgba(255, 255, 255, 0.2) !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display: block !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line-height: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text-align: center !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float: left !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 30px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border-radius: 0 !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-icon i {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 30px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display: inline-block !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vertical-align: middle !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line-height: normal !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-title {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-weight: bold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 14px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text-transform: uppercase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    letter-spacing: 0.5px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-amount {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-weight: bold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 24px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-desc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: rgba(255, 255, 255, 0.9) !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 12px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /* Ensure proper spacing and layout */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-box .info-box-content {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin-left: 85px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    padding: 15px 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $(document).ready(function () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $(document).on(&#x27;click&#x27;, &#x27;.print-mini-button&#x27;, function () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          $(&#x27;.mini_print&#x27;).printThis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-add-css-styling">
                                                    2.2 Add CSS Styling<a href="#22-add-css-styling" class="hash-link"
                                                        aria-label="Direct link to 2.2 Add CSS Styling"
                                                        title="Direct link to 2.2 Add CSS Styling">‚Äã</a>
                                                </h4>
                                                <p>
                                                    Add this CSS to your view file (before the closing
                                                    <code>&lt;/div&gt;</code> tags):
                                                </p>
                                                <div class="language-css codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-css codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;style type=</span><span class="token string" style="color:#e3116c">&quot;text/css&quot;</span><span class="token plain">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule rule" style="color:#00a4db">@media</span><span class="token atrule" style="color:#00a4db"> print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token selector class" style="color:#00009f">.modal</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">position</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">left</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">top</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">overflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> visible</span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token selector class" style="color:#00009f">.info-box</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">border</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token unit">px</span><span class="token plain"> solid </span><span class="token hexcode color">#ddd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">margin-bottom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token selector class" style="color:#00009f">.info-box-icon</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* Due Collection Styling */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-box</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">border-radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">box-shadow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token unit">px</span><span class="token plain"> </span><span class="token color function" style="color:#d73a49">rgba</span><span class="token color punctuation" style="color:#393A34">(</span><span class="token color number" style="color:#36acaa">0</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0.1</span><span class="token color punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">overflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hidden</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">position</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-icon</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color function" style="color:#d73a49">rgba</span><span class="token color punctuation" style="color:#393A34">(</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0.2</span><span class="token color punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">line-height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">text-align</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> center </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">float</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> left </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">border-radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-icon</span><span class="token selector" style="color:#00009f"> i</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> inline-block </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">vertical-align</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> middle </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">line-height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> normal </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-title</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bold</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">text-transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> uppercase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">letter-spacing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-amount</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color">white</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bold</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-desc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color function" style="color:#d73a49">rgba</span><span class="token color punctuation" style="color:#393A34">(</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0.9</span><span class="token color punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token selector class" style="color:#00009f">.due-collection-box</span><span class="token selector" style="color:#00009f"> </span><span class="token selector class" style="color:#00009f">.info-box-content</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">margin-left</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">85</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="step-3-add-language-entries">
                                                    Step 3: Add Language Entries<a href="#step-3-add-language-entries"
                                                        class="hash-link"
                                                        aria-label="Direct link to Step 3: Add Language Entries"
                                                        title="Direct link to Step 3: Add Language Entries">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Add these entries to your
                                                    <code>resources/lang/en/lang_v1.php</code> file:
                                                </p>
                                                <div class="language-php codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-php codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... existing entries ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;due_collections_today&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Today\&#x27;s Due Collections&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;collected_today&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Collected Today&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;pending_due_today&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Pending Due Today&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;overdue_amounts&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Overdue Amounts&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;transactions&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Transactions&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... rest of your language entries ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="step-4-update-close-register-modal-optional">
                                                    Step 4: Update Close Register Modal (Optional)<a
                                                        href="#step-4-update-close-register-modal-optional"
                                                        class="hash-link"
                                                        aria-label="Direct link to Step 4: Update Close Register Modal (Optional)"
                                                        title="Direct link to Step 4: Update Close Register Modal (Optional)">‚Äã</a>
                                                </h3>
                                                <p>
                                                    If you want the same feature in your close register
                                                    modal, update your
                                                    <code>resources/views/cash_register/close_register.blade.php</code>
                                                    with the same due collections section and CSS.
                                                </p>
                                                <div class="language-blade codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-blade codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;modal-dialog modal-lg&quot; role=&quot;document&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;modal-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {!! Form::open([&#x27;url&#x27; =&gt; action([\App\Http\Controllers\CashRegisterController::class, &#x27;postCloseRegister&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;method&#x27; =&gt; &#x27;post&#x27; ]) !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {!! Form::hidden(&#x27;user_id&#x27;, $register_details-&gt;user_id); !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-header&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;h3 class=&quot;modal-title&quot;&gt;@lang( &#x27;cash_register.current_register&#x27; ) ( {{ \Carbon::createFromFormat(&#x27;Y-m-d H:i:s&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $register_details-&gt;open_time)-&gt;format(&#x27;jS M, Y h:i A&#x27;) }} - {{ \Carbon::now()-&gt;format(&#x27;jS M, Y h:i A&#x27;) }})&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-body&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @include(&#x27;cash_register.payment_details&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- Add Due Collections Section --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @if(isset($details[&#x27;due_collections&#x27;]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;hr class=&quot;no-print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row no-print&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-md-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;h4&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; @lang(&#x27;lang_v1.due_collections_today&#x27;)&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-green due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.collected_today&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;due_collected_today&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;due_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-yellow due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.pending_due_today&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;pending_due_today&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;pending_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @if($details[&#x27;due_collections&#x27;][&#x27;overdue_amount&#x27;] &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-md-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;div class=&quot;info-box bg-red due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;info-box-icon due-collection-icon&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;i class=&quot;fa fa-exclamation-circle&quot;&gt;&lt;/i&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div class=&quot;info-box-content&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-text due-collection-title&quot;&gt;@lang(&#x27;lang_v1.overdue_amounts&#x27;)&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;info-box-number due-collection-amount&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @format_currency($details[&#x27;due_collections&#x27;][&#x27;overdue_amount&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;progress-description due-collection-desc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {{ $details[&#x27;due_collections&#x27;][&#x27;overdue_transactions_count&#x27;] }} @lang(&#x27;lang_v1.transactions&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-sm-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::label(&#x27;closing_amount&#x27;, __( &#x27;cash_register.total_cash&#x27; ) . &#x27;:*&#x27;) !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::text(&#x27;closing_amount&#x27;, @num_format($register_details-&gt;cash_in_hand + $register_details-&gt;total_cash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - $register_details-&gt;total_cash_refund - $register_details-&gt;total_cash_expense), [&#x27;class&#x27; =&gt; &#x27;form-control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            input_number&#x27;, &#x27;required&#x27;, &#x27;placeholder&#x27; =&gt; __( &#x27;cash_register.total_cash&#x27; ) ]); !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-sm-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::label(&#x27;total_card_slips&#x27;, __( &#x27;cash_register.total_card_slips&#x27; ) . &#x27;:*&#x27;) !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @show_tooltip(__(&#x27;tooltip.total_card_slips&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::number(&#x27;total_card_slips&#x27;, $register_details-&gt;total_card_slips, [&#x27;class&#x27; =&gt; &#x27;form-control&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;required&#x27;, &#x27;placeholder&#x27; =&gt; __( &#x27;cash_register.total_card_slips&#x27; ), &#x27;min&#x27; =&gt; 0 ]); !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-sm-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::label(&#x27;total_cheques&#x27;, __( &#x27;cash_register.total_cheques&#x27; ) . &#x27;:*&#x27;) !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @show_tooltip(__(&#x27;tooltip.total_cheques&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::number(&#x27;total_cheques&#x27;, $register_details-&gt;total_cheques, [&#x27;class&#x27; =&gt; &#x27;form-control&#x27;, &#x27;required&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;placeholder&#x27; =&gt; __( &#x27;cash_register.total_cheques&#x27; ), &#x27;min&#x27; =&gt; 0 ]); !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-md-8 col-sm-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;h3&gt;@lang( &#x27;lang_v1.cash_denominations&#x27; )&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          @if(!empty($pos_settings[&#x27;cash_denominations&#x27;]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;table class=&quot;table table-slim&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;thead&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-right&quot;&gt;@lang(&#x27;lang_v1.denomination&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot;&gt;&amp;nbsp;&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-center&quot;&gt;@lang(&#x27;lang_v1.count&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot;&gt;&amp;nbsp;&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th width=&quot;20%&quot; class=&quot;text-left&quot;&gt;@lang(&#x27;sale.subtotal&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/thead&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;tbody&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @foreach(explode(&#x27;,&#x27;, $pos_settings[&#x27;cash_denominations&#x27;]) as $dnm)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-right&quot;&gt;{{$dnm}}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-center&quot;&gt;X&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td&gt;{!! Form::number(&quot;denominations[$dnm]&quot;, null, [&#x27;class&#x27; =&gt; &#x27;form-control cash_denomination input-sm&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &#x27;min&#x27; =&gt; 0, &#x27;data-denomination&#x27; =&gt; $dnm, &#x27;style&#x27; =&gt; &#x27;width: 100px; margin:auto;&#x27; ]); !!}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-center&quot;&gt;=&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td class=&quot;text-left&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &lt;span class=&quot;denomination_subtotal&quot;&gt;0&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              @endforeach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/tbody&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;tfoot&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;th colspan=&quot;4&quot; class=&quot;text-center&quot;&gt;@lang(&#x27;sale.total&#x27;)&lt;/th&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;td&gt;&lt;span class=&quot;denomination_total&quot;&gt;0&lt;/span&gt;&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/tfoot&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/table&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          @else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;p class=&quot;help-block&quot;&gt;@lang(&#x27;lang_v1.denomination_add_help_text&#x27;)&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-sm-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::label(&#x27;closing_note&#x27;, __( &#x27;cash_register.closing_note&#x27; ) . &#x27;:&#x27;) !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {!! Form::textarea(&#x27;closing_note&#x27;, null, [&#x27;class&#x27; =&gt; &#x27;form-control&#x27;, &#x27;placeholder&#x27; =&gt; __(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;cash_register.closing_note&#x27; ), &#x27;rows&#x27; =&gt; 3 ]); !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;row&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-xs-6&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;report.user&#x27;):&lt;/b&gt; {{ $register_details-&gt;user_name}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;business.email&#x27;):&lt;/b&gt; {{ $register_details-&gt;email}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;b&gt;@lang(&#x27;business.business_location&#x27;):&lt;/b&gt; {{ $register_details-&gt;location_name}}&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @if(!empty($register_details-&gt;closing_note))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;col-xs-6&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;strong&gt;@lang(&#x27;cash_register.closing_note&#x27;):&lt;/strong&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {{$register_details-&gt;closing_note}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;modal-footer&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;button&quot; class=&quot;tw-dw-btn tw-dw-btn-neutral tw-text-white&quot; data-dismiss=&quot;modal&quot;&gt;@lang(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;messages.cancel&#x27; )&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button type=&quot;submit&quot; class=&quot;tw-dw-btn tw-dw-btn-primary tw-text-white&quot;&gt;@lang( &#x27;cash_register.close_register&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {!! Form::close() !!}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;style type=&quot;text/css&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @media print {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .modal {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      position: absolute;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      left: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      top: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      margin: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      padding: 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      overflow: visible !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .info-box {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      border: 1px solid #ddd;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      margin-bottom: 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      padding: 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .info-box-icon {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      display: none;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /* Due Collection Styling for Close Register Modal */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-box {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border-radius: 8px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    overflow: hidden;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    position: relative;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-icon {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    background: rgba(255, 255, 255, 0.2) !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display: block !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line-height: 70px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text-align: center !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float: left !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 30px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    border-radius: 0 !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-icon i {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 30px !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display: inline-block !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vertical-align: middle !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line-height: normal !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-title {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-weight: bold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 14px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text-transform: uppercase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    letter-spacing: 0.5px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-amount {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: white !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-weight: bold;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 24px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-desc {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color: rgba(255, 255, 255, 0.9) !important;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    font-size: 12px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /* Ensure proper spacing and layout */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .due-collection-box .info-box-content {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin-left: 85px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    padding: 15px 10px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <hr />
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-testing">
                                                    üß™ Testing<a href="#-testing" class="hash-link"
                                                        aria-label="Direct link to üß™ Testing"
                                                        title="Direct link to üß™ Testing">‚Äã</a>
                                                </h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-scenarios">
                                                    Test Scenarios<a href="#test-scenarios" class="hash-link"
                                                        aria-label="Direct link to Test Scenarios"
                                                        title="Direct link to Test Scenarios">‚Äã</a>
                                                </h3>
                                                <ol>
                                                    <li>
                                                        <strong>Create a credit sale</strong>: Make a sale
                                                        with partial payment
                                                    </li>
                                                    <li>
                                                        <strong>Collect due payment</strong>: Pay the
                                                        remaining amount today
                                                    </li>
                                                    <li>
                                                        <strong>Check register details</strong>: Verify
                                                        &quot;Collected Today&quot; shows the payment
                                                    </li>
                                                    <li>
                                                        <strong>Create overdue transactions</strong>: Make
                                                        sales from previous days with unpaid amounts
                                                    </li>
                                                    <li>
                                                        <strong>Verify overdue display</strong>: Check
                                                        that red overdue box appears when applicable
                                                    </li>
                                                </ol>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="expected-results">
                                                    Expected Results<a href="#expected-results" class="hash-link"
                                                        aria-label="Direct link to Expected Results"
                                                        title="Direct link to Expected Results">‚Äã</a>
                                                </h3>
                                                <ul>
                                                    <li>
                                                        ‚úÖ <strong>Collected Today</strong>: Shows all due
                                                        payments received today
                                                    </li>
                                                    <li>
                                                        ‚úÖ <strong>Pending Due Today</strong>: Shows
                                                        unpaid amounts from today&#x27;s sales
                                                    </li>
                                                    <li>
                                                        ‚úÖ <strong>Overdue Amounts</strong>: Shows only
                                                        when there are actually overdue transactions
                                                    </li>
                                                    <li>
                                                        ‚úÖ <strong>Transaction Counts</strong>: Accurate
                                                        count of affected transactions
                                                    </li>
                                                    <li>
                                                        ‚úÖ <strong>Responsive Design</strong>: Works on
                                                        mobile and desktop
                                                    </li>
                                                    <li>
                                                        ‚úÖ <strong>Print Friendly</strong>: Looks good
                                                        when printed
                                                    </li>
                                                </ul>
                                                <hr />
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-customization">
                                                    üé® Customization<a href="#-customization" class="hash-link"
                                                        aria-label="Direct link to üé® Customization"
                                                        title="Direct link to üé® Customization">‚Äã</a>
                                                </h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="changing-colors">
                                                    Changing Colors<a href="#changing-colors" class="hash-link"
                                                        aria-label="Direct link to Changing Colors"
                                                        title="Direct link to Changing Colors">‚Äã</a>
                                                </h3>
                                                <p>
                                                    You can customize the box colors by modifying the
                                                    Bootstrap classes:
                                                </p>
                                                <div class="language-blade codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-blade codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Green for collected --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;info-box bg-green due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Yellow/Orange for pending --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;info-box bg-yellow due-collection-box&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Red for overdue --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;info-box bg-red due-collection-box&quot;&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-more-icons">
                                                    Adding More Icons<a href="#adding-more-icons" class="hash-link"
                                                        aria-label="Direct link to Adding More Icons"
                                                        title="Direct link to Adding More Icons">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Replace the Font Awesome icons with your preferred
                                                    ones:
                                                </p>
                                                <div class="language-blade codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-blade codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- Available alternatives --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;i class=&quot;fa fa-money&quot;&gt;&lt;/i&gt;          &lt;!-- Money icon --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt;        &lt;!-- Clock icon --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;i class=&quot;fa fa-warning&quot;&gt;&lt;/i&gt;        &lt;!-- Warning icon --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;i class=&quot;fa fa-calendar&quot;&gt;&lt;/i&gt;       &lt;!-- Calendar icon --&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="modifying-layout">
                                                    Modifying Layout<a href="#modifying-layout" class="hash-link"
                                                        aria-label="Direct link to Modifying Layout"
                                                        title="Direct link to Modifying Layout">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Change from 3 boxes to 2 boxes by removing the
                                                    overdue section or adjust column sizes:
                                                </p>
                                                <div class="language-blade codeBlockContainer_Ckt0 theme-code-block"
                                                    style="
                              --prism-color: #393a34;
                              --prism-background-color: #f6f8fa;
                            ">
                                                    <div class="codeBlockContent_QJqH">
                                                        <pre tabindex="0"
                                                            class="prism-code language-blade codeBlock_bY9V thin-scrollbar"
                                                            style="
                                  color: #393a34;
                                  background-color: #f6f8fa;
                                "><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- For 2 equal boxes --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;col-md-6&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- For 3 equal boxes --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;col-md-4&quot;&gt;</span><br></span></code></pre>
                                                    </div>
                                                </div>
                                                <hr />
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-troubleshooting">
                                                    üîß Troubleshooting<a href="#-troubleshooting" class="hash-link"
                                                        aria-label="Direct link to üîß Troubleshooting"
                                                        title="Direct link to üîß Troubleshooting">‚Äã</a>
                                                </h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-issues">
                                                    Common Issues<a href="#common-issues" class="hash-link"
                                                        aria-label="Direct link to Common Issues"
                                                        title="Direct link to Common Issues">‚Äã</a>
                                                </h3>
                                                <p><strong>Issue</strong>: Icons not showing</p>
                                                <ul>
                                                    <li>
                                                        <strong>Solution</strong>: Ensure Font Awesome is
                                                        loaded in your layout
                                                    </li>
                                                    <li>
                                                        <strong>Alternative</strong>: Use text symbols or
                                                        different icon libraries
                                                    </li>
                                                </ul>
                                                <p><strong>Issue</strong>: Data not appearing</p>
                                                <ul>
                                                    <li>
                                                        <strong>Solution</strong>: Check that
                                                        <code>$details[&#x27;due_collections&#x27;]</code>
                                                        is being passed to the view
                                                    </li>
                                                    <li>
                                                        <strong>Debug</strong>: Add
                                                        <code>{{ dd($details) }}</code> to see what data
                                                        is available
                                                    </li>
                                                </ul>
                                                <p><strong>Issue</strong>: Incorrect amounts</p>
                                                <ul>
                                                    <li>
                                                        <strong>Solution</strong>: Verify your database
                                                        relationships match the query structure
                                                    </li>
                                                    <li>
                                                        <strong>Check</strong>: Ensure
                                                        <code>business_id</code> is correctly set in
                                                        session
                                                    </li>
                                                </ul>
                                                <p><strong>Issue</strong>: Styling conflicts</p>
                                                <ul>
                                                    <li>
                                                        <strong>Solution</strong>: Use more specific CSS
                                                        selectors or <code>!important</code> declarations
                                                    </li>
                                                    <li>
                                                        <strong>Alternative</strong>: Move CSS to a
                                                        separate file
                                                    </li>
                                                </ul>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="database-requirements">
                                                    Database Requirements<a href="#database-requirements"
                                                        class="hash-link"
                                                        aria-label="Direct link to Database Requirements"
                                                        title="Direct link to Database Requirements">‚Äã</a>
                                                </h3>
                                                <p>
                                                    Ensure your database has these tables and
                                                    relationships:
                                                </p>
                                                <ul>
                                                    <li>
                                                        <code>transactions</code> table with
                                                        <code>business_id</code>,
                                                        <code>payment_status</code>, <code>type</code>,
                                                        <code>status</code> columns
                                                    </li>
                                                    <li>
                                                        <code>transaction_payments</code> table with
                                                        <code>transaction_id</code>, <code>amount</code>,
                                                        <code>paid_on</code> columns
                                                    </li>
                                                    <li>
                                                        Proper foreign key relationships between tables
                                                    </li>
                                                </ul>
                                                <hr />
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="-summary">
                                                    üìù Summary<a href="#-summary" class="hash-link"
                                                        aria-label="Direct link to üìù Summary"
                                                        title="Direct link to üìù Summary">‚Äã</a>
                                                </h2>
                                                <p>
                                                    You&#x27;ve successfully implemented a comprehensive
                                                    due collections display that provides:
                                                </p>
                                                <ul>
                                                    <li>
                                                        <strong>Real-time visibility</strong> into payment
                                                        collections
                                                    </li>
                                                    <li>
                                                        <strong>Business-wide data</strong> for better
                                                        decision making
                                                    </li>
                                                    <li>
                                                        <strong>Professional UI</strong> with responsive
                                                        design
                                                    </li>
                                                    <li>
                                                        <strong>Smart conditional display</strong> for
                                                        optimal user experience
                                                    </li>
                                                </ul>
                                                <p>
                                                    This feature will help your business track due
                                                    collections more effectively and improve cash flow
                                                    management.
                                                </p>
                                            </div>
                                        </article>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>
</body>

</html>